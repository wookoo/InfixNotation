# 중위 > 후위 변환어플

중위식을 후위식으로 변환하는 어플입니다.

개발환경 : 윈도우 10, Android Studio 3 이상

개발 언어 : xml (디자인) , Kotlin (메인 소스)

개발 목적 : 코틀린 학습 및, 중위로 표현된 수식을 후위로 변환함으로써 스택을 응용해보기.

<hr>

## 파일 구성

파일은 크게 2가지 파일로 구분됩니다.

1. Stack.kt

2. Calculate.kt

###

알고리즘은 다음과 같이 진행됩니다.

1. 수식검사

2. 괄호쌍 검사

3. 후위식 변환

4. 후위식 평가


### Stack.kt

스택의 클래스를 구현해 놓은 소스입니다.

보다 효율적인 사용을 위해, ArrayList 를 활용하여 스택을 구현하였습니다.

구현 해 놓은 메소드는 다음과 같습니다.

- push
    - 클래스 내의 ArrayList 의 맨 뒤에 값을 추가합니다.
- pop
    - 클래스 내의 ArrayList 의 맨 뒤의 값을 제거하고 반환합니다.
- peek
    - 클래스 내의 ArrayList 의 맨 뒤의 값을 그냥 반환합니다.
- Is_empty
    - 클래스 내의 top 필드가 -1 이면, 참, 아니면 거짓을 반환합니다.


push
- ArrayList 의 add 메소드를 사용하여 ArrayList 에 값을 추가합니다.
- 값이 추가 되었으면, int 형 필드 top 의 크기를 1 증가시킵니다.

pop
- 스택이 비어있지 않으면 ArrayList 의 get 메소드를 사용하여 마지막 인덱스가 가진 값을 임시 변수에 저장합니다.
- 값이 저장되었으면, removeAt 메소드를 사용하여 스택의 맨 마지막 index 의 값을 지웁니다.
- 저장된 값을 반환합니다.
- 스택이 비어있을 경우 -1 을 반환합니다.

peek
- 스택이 비어있지 않으면 ArrayList 의 get메소드를 사용하여 마지막 인덱스가 가진 값을 반환합니다.
- 스택이 비어있으면 -1을 반환합니다.

<hr>

### Calculate.kt

크게 기능을 5가지로 나눌 수 있습니다.

1. 숫자 버튼을 눌렀을때

2. 기호 버튼을 눌렀을때

3. 여는 괄호 버튼을 눌렀을때

4. 닫는 괄호 버튼을 눌렀을때

5. 계산 버튼을 눌렀을때



#### 숫자 버튼을 눌렀을때

숫자 버튼을 눌렀을때는 다음과 같습니다.

1. TextView 가 빈 String 인지 아닌지 관계 없이 그냥 숫자를 넣습니다.



#### 기호 버튼을 눌렀을때

기호 버튼을 눌렀을때는 다음과 같습니다.

1. TextView 가 빈 String 인지 확인합니다. 빈 스트링이면 아무 작업도 수행하지 않습니다.

2. TextView 가 빈 String 이 아니면, String의 마지막 index 값을 확인해봅니다.  String의 index 값이 숫자면, 기호를 추가합니다.

3. 2에서 수행한 숫자가 아닌 기호면, 누른 기호로 그 기호를 바꿔버립니다.



#### 여는 괄호 버튼을 눌렀을때

여튼 괄호 버튼을 눌렀을때는 다음과 같습니다.

1. TextView 가 빈 String인지 확인 합니다. 빈 스트링이면 ( 를 추가해줍니다.

2. TextView 가 빈 String 이 아니면,  String 의 마지막 index 값을 확인해봅니다.  String 의 index 값이 '+', '-', '÷', '\*' ,'(',')' 면, ( 를 추가합니다.

3. TextView 가 2번 조건을 만족하지 않으면, 아무 작업도 수행하지 않습니다.

#### 닫는 괄호 버튼을 눌렀을때

닫는 괄호 버튼을 눌렀을때는 다음과 같습니다.

1. TextView 가 빈 String 인지 확인합니다. 빈 스트링이면 ) 를 추가합니다.

2. TextView 가 빈 String 이 아니면, String 의 마지막 index 값을 확인해본다.  String 의 index 값이 '0','1','2','3','4','5','6','7','8','9','(',')' 면, ( 를 추가 합니다.

3. TextView 가 2번 조건을 만족하지 않으면, 아무 작업도 수행하지 않습니다.

#### 계산 버튼을 눌렀을때

계산 버튼을 눌렀을때는 다음과 같습니다.

1. TextView 가 빈 String 인지 확인합니다. 빈 String 이면 아무 작업도 수행하지 않습니다.

2. TextView 가 마지막 index 가 기호인지 확인합니다. 기호이면, 변환을 하지 않고, 올바르지 않은 수식이라고 Toast Message 를 출력해줍니다.

3. TextView 가 마지막 index 가 기호가 아니면, 괄호쌍 검사를 수행하게 됩니다.

4. 괄호쌍 검사는 ( 가 나오면 Stack 에 push 를 수행합니다. ) 가 나오면 pop 을 수행합니다. 만약 스택이 비었는데 ) 가 나오면, 괄호쌍을 확인하라는 Toast Message 를 출력합니다.

5. 괄호쌍 검사를 다 마치고, Stack 이 비었나 확인해줍니다. 스택이 비어있지 않아도 올바르지 않은 괄호쌍이라고 Toast Message 를 출력합니다.

6. 모두 정상적으로 식 검사가 끝났으면, 그제서야 변환 작업에 들어갑니다. 스트링의 최대 index 까지 접근할대 동안 적절히 push 와 pop, 스트링에 값을 추가하는 작업을 진행합니다. 2자리 이상의 숫자도 고려해야 하므로, 스트링은 각각 공백으로 서로의 기호 및 숫자를 구분합니다.

7. 그 후 6번에서 생성된 스트링을 사용자에게 보여줍니다.

8. 7번에서 생성된 String 을가지고 후위식을 평가 합니다.


##### 후위식 평가 방법

후위식 평가는 다음과 같습니다.

우선 후위식을 평가 하기 전, 기호 숫자 모두 공백으로 구분되어 있는 형태로 값을 받습니다.

1. String 을 받아와서, split(" ") 메소드를 통해 모든 기호 또는 숫자를 공백을 기준으로 자른 배열을 만듭니다.

2. for 문을 사용하여 잘린 String 을 toInt 메소드를 실행해봅니다. 오류가 날수 있으므로 try 문에 넣습니다.

3. try 문이 정상적으로 수행 됬다는 것은 그 split 한 요소가 Int 형으로 바꿀수 있다는 말 이므로 push 를 수행합니다.

4. try 문이 정상적으로 수행되지 않는다는 것은 catch 문을 수행한다는 것 입니다. 이는 곧 숫자가 아닌 기호가 들어왔음을 의미합니다.

5. catch 문에선 pop 을 두번 수행하여 각각 left now 변수에 저장을 합니다.

6. 저장이 되었으면 기호에 맞게 절절히 곱하기, 빼기 나누기 등의 연산을 수행 후, 스택에 push 를 합니다.

7. 2 ~ 6번 작업이 모두 끝났으면, 스택에 남아있는 값은 평가가 완료된 후위식 입니다.  그렇기 때문에 pop 을 수행합니다.

8. pop 이 수행되었으면 그 나온 값을 TextView 를 통해 띄워주면 됩니다.
